<!DOCTYPE html>
<html lang="ja">
<head>
<meta http-equiv="content-type" content="text/html; charset=gb2312">
<title>弩シミュレ`タ</title>
<link rel="stylesheet" href="style.css" type="text/css">
<style type="text/css">
<!--
table.top td {color:blue;cursor:pointer;}
#gun {text-align:center;}
#gun .dai {background-color:silver;}
-->
</style>
</head>
<body>
<table width=300 border=2 class=top><tr>
 <td OnClick="DamageForm.setWeapon('right');">p弩</td>
 <td OnClick="DamageForm.setWeapon('heavy');">重弩</td>
</tr></table>
<table width=750 border=2><tr>
 <td class=t style="width:5em;">使用武器</td>
 <td colspan=5>
	<select id="s_wp" OnChange="DamageForm.cngWeapon();DamageForm.calc();">
	<option value="" selected>-
	</select>
  </td>
  <td style="width:2.5em;" class=t>N</td>
  <td style="width:2.5em;" id="d_class">　</td>
 </tr><tr>
  <td style="width:5em;" class=t>LV5攻</td>
  <td style="width:2.5em;" id="d_att">　</td>
  <td style="width:2.5em;" class=t>会心</td>
  <td style="width:2.5em;" id="d_cri">　</td>
  <td style="width:2.5em;" class=t>装填</td>
  <td style="width:5em;" id="wpso">　</td>
  <td style="width:2.5em;" class=t>反</td>
  <td style="width:4em;" id="wphan">　</td>
  <td style="width:2.5em;" class=t>速射</td>
  <td id=d_spec>　</td>
</tr></table>
<table width=750 border=2><tr>
 <td class=t style="width:5em;">条件O定</td>
 <td style="width:9em;">
	装填速度 ： <select id=souten OnChange="DamageForm.calc();">
	<option value=3>+3
	<option value=2>+2
	<option value=1>+1
	<option value=0 selected>]有
	<option value=-1>-1
	</select>
 </td><td style="width:9em;">
	反pp ： <select id=handou OnChange="DamageForm.calc();">
	<option value=4>+2
	<option value=2>+1
	<option value=0 selected>]有
	</select>
 </td><td>
	B射 ： <select id=rensya OnChange="DamageForm.calc();">
	<option value=0 selected>]有
	<option value=1>k
	</select>
 </td>
</tr></table>
<table width=550 border=1 cellspacing=1 id=gun>
<col class=dai><col span=5 style="width:70px;">
<tr><th>名</th><th>b填</th><th>反</th><th>数</th><th>a正後<br>b填</th><th>
	a正後<br>反</th></tr>
<tr><td>LV1通常</td><td id=k0r>5</td><td id=k0h>8</td><td id=d0t>　</td><td id=d0r>
	　</td><td id=d0h>　</td></tr>
<tr><td>LV2通常</td><td id=k1r>6</td><td id=k1h>9</td><td id=d1t>　</td><td id=d1r>
	　</td><td id=d1h>　</td></tr>
<tr><td>LV3通常</td><td id=k2r>7</td><td id=k2h>10</td><td id=d2t>　</td><td id=d2r>
	　</td><td id=d2h>　</td></tr>
<tr><td>LV1通</td><td id=k3r>6</td><td id=k3h>10</td><td id=d3t>　</td><td id=d3r>
	　</td><td id=d3h>　</td></tr>
<tr><td>LV2通</td><td id=k4r>7</td><td id=k4h>10</td><td id=d4t>　</td><td id=d4r>
	　</td><td id=d4h>　</td></tr>
<tr><td>LV3通</td><td id=k5r>8</td><td id=k5h>11</td><td id=d5t>　</td><td id=d5r>
	　</td><td id=d5h>　</td></tr>
<tr><td>LV1散</td><td id=k6r>5</td><td id=k6h>10</td><td id=d6t>　</td><td id=d6r>
	　</td><td id=d6h>　</td></tr>
<tr><td>LV2散</td><td id=k7r>6</td><td id=k7h>10</td><td id=d7t>　</td><td id=d7r>
	　</td><td id=d7h>　</td></tr>
<tr><td>LV3散</td><td id=k8r>7</td><td id=k8h>11</td><td id=d8t>　</td><td id=d8r>
	　</td><td id=d8h>　</td></tr>
<tr><td>LV1丶琢</td><td id=k9r>7</td><td id=k9h>11</td><td id=d9t>　</td><td id=d9r>
	　</td><td id=d9h>　</td></tr>
<tr><td>LV2丶琢</td><td id=k10r>8</td><td id=k10h>12</td><td id=d10t>　</td><td id=d10r>
	　</td><td id=d10h>　</td></tr>
<tr><td>LV3丶琢</td><td id=k11r>9</td><td id=k11h>13</td><td id=d11t>　</td><td id=d11r>
	　</td><td id=d11h>　</td></tr>
<tr><td>LV1U散</td><td id=k12r>8</td><td id=k12h>13</td><td id=d12t>　</td><td id=d12r>
	　</td><td id=d12h>　</td></tr>
<tr><td>LV2U散</td><td id=k13r>9</td><td id=k13h>14</td><td id=d13t>　</td><td id=d13r>
	　</td><td id=d13h>　</td></tr>
<tr><td>LV3U散</td><td id=k14r>10</td><td id=k14h>14</td><td id=d14t>　</td><td id=d14r>
	　</td><td id=d14h>　</td></tr>
<tr><td>LV1回</td><td id=k15r>7</td><td id=k15h>11</td><td id=d15t>　</td><td id=d15r>
	　</td><td id=d15h>　</td></tr>
<tr><td>LV2回</td><td id=k16r>9</td><td id=k16h>13</td><td id=d16t>　</td><td id=d16r>
	　</td><td id=d16h>　</td></tr>
<tr><td>LV1毒</td><td id=k17r>7</td><td id=k17h>11</td><td id=d17t>　</td><td id=d17r>
	　</td><td id=d17h>　</td></tr>
<tr><td>LV2毒</td><td id=k18r>9</td><td id=k18h>13</td><td id=d18t>　</td><td id=d18r>
	　</td><td id=d18h>　</td></tr>
<tr><td>LV1麻w</td><td id=k19r>7</td><td id=k19h>11</td><td id=d19t>　</td><td id=d19r>
	　</td><td id=d19h>　</td></tr>
<tr><td>LV2麻w</td><td id=k20r>9</td><td id=k20h>13</td><td id=d20t>　</td><td id=d20r>
	　</td><td id=d20h>　</td></tr>
<tr><td>LV1睡眠</td><td id=k21r>7</td><td id=k21h>11</td><td id=d21t>　</td><td id=d21r>
	　</td><td id=d21h>　</td></tr>
<tr><td>LV2睡眠</td><td id=k22r>9</td><td id=k22h>13</td><td id=d22t>　</td><td id=d22r>
	　</td><td id=d22h>　</td></tr>
<tr><td>火炎</td><td id=k23r>6</td><td id=k23h>10</td><td id=d23t>　</td><td id=d23r>
	　</td><td id=d23h>　</td></tr>
<tr><td>水冷</td><td id=k24r>6</td><td id=k24h>10</td><td id=d24t>　</td><td id=d24r>
	　</td><td id=d24h>　</td></tr>
<tr><td></td><td id=k25r>6</td><td id=k25h>10</td><td id=d25t>　</td><td id=d25r>
	　</td><td id=d25h>　</td></tr>
<tr><td>冰Y</td><td id=k26r>6</td><td id=k26h>10</td><td id=d26t>　</td><td id=d26r>
	　</td><td id=d26h>　</td></tr>
<tr><td>琮</td><td id=k27r>9</td><td id=k27h>13</td><td id=d27t>　</td><td id=d27r>
	　</td><td id=d27h>　</td></tr>
<tr><td>捕@用麻醉</td><td id=k28r>8</td><td id=k28h>11</td><td id=d28t>　</td><td id=d28r>
	　</td><td id=d28h>　</td></tr>
<tr><td>染色</td><td id=k29r>7</td><td id=k29h>11</td><td id=d29t>　</td><td id=d29r>
	　</td><td id=d29h>　</td></tr>
<tr><td>鬼人</td><td id=k30r>7</td><td id=k30h>11</td><td id=d30t>　</td><td id=d30r>
	　</td><td id=d30h>　</td></tr>
<tr><td>硬化</td><td id=k31r>7</td><td id=k31h>11</td><td id=d31t>　</td><td id=d31r>
	　</td><td id=d31h>　</td></tr>
<tr><td>酸</td><td id=k32r>12</td><td id=k32h>15</td><td id=d32t>　</td><td id=d32r>
	　</td><td id=d32h>　</td></tr>
<tr><td>冰酸</td><td id=k33r>12</td><td id=k33h>15</td><td id=d33t>　</td><td id=d33r>
	　</td><td id=d33h>　</td></tr>
<tr><td>酸</td><td id=k34r>12</td><td id=k34h>15</td><td id=d34t>　</td><td id=d34r>
	　</td><td id=d34h>　</td></tr>
<tr><td>排</td><td id=k35r>10</td><td id=k35h>15</td><td id=d35t>　</td><td id=d35r>
	　</td><td id=d35h>　</td></tr>
<tr><td>爆</td><td id=k36r>12</td><td id=k36h>30</td><td id=d36t>　</td><td id=d36r>
	　</td><td id=d36h>　</td></tr>
<tr><td>爆</td><td id=k37r>12</td><td id=k37h>30</td><td id=d37t>　</td><td id=d37r>
	　</td><td id=d37h>　</td></tr>
</table>
<p>
●　のb填速度
<table border=1 cellspacing=1 cellpadding=1 style="font-size:80%;float:left;text-align:center;">
<caption>幼</caption>
<tr><th style="width:7em;">b填速度</th><th style="width:6em;">幼</th></tr>
<tr><td>４以下</td><td>快（62）</td></tr>
<tr><td>５～７</td><td>普通（78）</td></tr>
<tr><td>８以上</td><td>慢（103）</td></tr>
</table>
<table border=1 cellspacing=1 cellpadding=1 style="font-size:80%;float:left;text-align:center;">
<caption>弩のb填修正</caption>
<tr><th style="width:7em;">b填</th><th style="width:5em;">修正</th></tr>
<tr><td>慢</td><td>0</td></tr>
<tr><td>^慢</td><td>1</td></tr>
<tr><td>普通</td><td>2</td></tr>
<tr><td>^快</td><td>3</td></tr>
<tr><td>快</td><td>4</td></tr>
</table>
<table border=1 cellspacing=1 cellpadding=1 style="font-size:80%;text-align:center;">
<caption>技能による修正</caption>
<tr><th style="width:7em;">技能</th><th style="width:5em;">修正</th></tr>
<tr><td>装填速度-2</td><td>-3</td></tr>
<tr><td>b填速度-1</td><td>-1</td></tr>
<tr><td>技能]有</td><td>0</td></tr>
<tr><td>b填速度+1</td><td>1</td></tr>
<tr><td>b填速度+2</td><td>2</td></tr>
<tr><td>b填速度+3</td><td>3</td></tr>
</table>
<pre>
b填する速度の算式

b填速度 ＝ のb填 － （弩のb填修正 ＋ 装填速度技能による修正）

幼冥 （） の中のはフレ`ム数（30フレ`ム＝１秒）
</pre>
<hr style="height:1px">
<p>
●　k射rの反
<table border=1 cellspacing=1 cellpadding=1 style="font-size:80%;float:left;text-align:center;">
<caption>幼</caption>
<tr><th style="width:7em;">k射反</th><th style="width:6em;">幼</th></tr>
<tr><td>０～８</td><td>反有。26）</td></tr>
<tr><td>９～１０</td><td>反又校56）</td></tr>
<tr><td>１１～１４</td><td>反哟螅72）</td></tr>
</table>
<table border=1 cellspacing=1 cellpadding=1 style="font-size:80%;float:left;text-align:center;">
<caption>弩の反有拚</caption>
<tr><th style="width:7em;">反</th><th style="width:5em;">修正</th></tr>
<tr><td>中</td><td>2</td></tr>
<tr><td>^小</td><td>3</td></tr>
<tr><td>小</td><td>4</td></tr>
</table>
<table border=1 cellspacing=1 cellpadding=1 style="font-size:80%;text-align:center;">
<caption>技能による修正</caption>
<tr><th style="width:7em;">技能</th><th style="width:5em;">修正</th></tr>
<tr><td>技能]有</td><td>0</td></tr>
<tr><td>反pp+1</td><td>2</td></tr>
<tr><td>反pp+2</td><td>4</td></tr>
</table>
<pre>
k射したrの反婴斡算式

反 ＝ の反 － （弩の反有拚 ＋ 反pp技能による修正）

幼冥 （） の中のはフレ`ム数（30フレ`ム＝１秒）

※B射技能がk婴筏皮い龊稀の反がそのまま反となる
</pre>
<script type="text/javascript">
<!--
/*@cc_on if (@_jscript_version < 9) {_d=document;eval('var document=_d');}@*/
var DamageForm = (function (){
var I_aNAME = 0,I_aAT = 1,I_aZOKU = 2,I_aZOKUAT = 3,I_aZYOU = 4,I_aZYOUAT = 5,I_aCRI = 6,I_aRARE = 7,I_aGR = 8,I_aSLOT = 9,I_aDEF = 10,I_aHR = 11,I_aCRE = 12,I_aCLASS = 13,I_aSINKAGR = 14,I_aDOC = 15,I_aGAUGE = 16,I_aREACH = 17,I_aKYOKUSYA = 5,I_aYA = 16,I_aBIN = 17,I_aSPEED = 4,I_aSOKUSYA = 16,I_aKICK = 17,I_aRELO = 18,I_aGUN = 19;
var RELOADNAME = ["慢","^慢","普通","^快","快"];
var KICKNAME = ["最大",0,"中","^小","小"];
var SPEEDNAME = ["慢","^慢","^快","快"];
var CLASSTYPE = {"":" ","G":"N","T":"天","H":"N","Z":"Ｇ","O":"H方","C":"ＨＣ","S":"M化","N":"猫","P":"ＳＰ"}
var MST_Equip = {},WP_Rui = 0;
var global = {
//------------------------------------初期化----------
init : function(){
}
//------------------------------------デ`タセット----------
,setEquip : function (name,data){
if (name === "right" || name === "heavy") MST_Equip[name]=data;
}
,setSinka : function (name,data){
}
,setSozai : function (data){
}
//------------------------------------武器セット----------
,setWeapon : function(id){
var s_wp = document.getElementById("s_wp"),c = 1,eqlist = MST_Equip[id];
s_wp.length = 1;
s_wp.options[0].text = "－" + (id === "right" ? "p弩" : "重弩") + "－";
WP_Rui = id;
if (window.opera){
	var wkList = [],i=0;
	var Fulltohalf = (function (){
		var han = "0123456789.,-+ABCDEFGHIJKLMNOPQRSTUVWXYZアイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワ&#65382;ンアイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワ&#65382;ンァァィィゥゥェェォォッッャャュュョョカキクケコサシスセソタチツテトハヒフヘホハヒフヘホカキクケコサシスセソタチツテトハヒフヘホハヒフヘホウ";
		var zen = "０１２３４５６７８９．，－＋ＡＢＣＤＥＦＪＨＩＪＫＬＭＮＯＰＱＲＳＴＵＶＷＸＹＺアイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲンあいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわをんぁァぃィぅゥぇェぉォっッゃャゅュょョがぎぐげござじずぜぞだぢづでどばびぶべぼぱぴぷぺぽガギグゲゴザジズゼゾダジヅデドバビブベボパピプペポヴ";
		return function (strVal) {
			for (var i=0,str = "",m=strVal.length,c = "",n=0; i<m; i++){
				c = strVal.charAt(i),n = zen.indexOf(c,0);
				str += (n >= 0) ? han.charAt(n) : "“" + c;
			}
			return str;
		}
	})();
	for(var eqid in eqlist) {
		wkList[i++] = [eqlist[eqid].split(",")[I_aNAME],eqid];
	}
//	for(var i=0,m=wkList.length; i<m; wkList[i][0] = Fulltohalf(wkList[i++][1][I_aNAME]));
//	wkList.sort();
	wkList.sort(function (a, b){return Fulltohalf(b[0]) < Fulltohalf(a[0]) ? 1 : -1})
	for(var eqid in wkList) {
		s_wp.options[c++] = new Option(wkList[eqid][0],wkList[eqid][1]);
	}
} else {
	for(var eqid in eqlist) {
		s_wp.options[c++] = new Option(eqlist[eqid].split(",")[I_aNAME],eqid);
	}
}
}
//------------------------------------武器涓----------
,cngWeapon : function (){
var eq = MST_Equip[WP_Rui][document.getElementById("s_wp").value].split(","),Ma = Math.abs;

//攻
document.getElementById("d_att").firstChild.nodeValue = Math.round(Number(eq[I_aAT]) * 12 / 10);
//装填
document.getElementById("wpso").firstChild.nodeValue = eq[I_aRELO] + ":" + RELOADNAME[eq[I_aRELO]];
//反
document.getElementById("wphan").firstChild.nodeValue = eq[I_aKICK] + ":" + KICKNAME[eq[I_aKICK]];
//
for (i=0; i <= 31; i++) {
	document.getElementById("d"+i+"t").innerHTML = eq[I_aGUN+i] > 0 ? eq[I_aGUN+i] : eq[I_aGUN+i] < 0 ? "<span style='color:red;'>"+ Ma(eq[I_aGUN+i]) +"</span>" : "<br>";
}
//会心
document.getElementById("d_cri").firstChild.nodeValue = eq[I_aCRI];
//スペック
document.getElementById("d_spec").firstChild.nodeValue = eq[I_aSOKUSYA];
//N
document.getElementById("d_class").firstChild.nodeValue = CLASSTYPE[eq[I_aCLASS]];
}
//------------------------------------算----------
,calc : function (){
var rensya = document.getElementById("rensya").value,souten = document.getElementById("souten").value,handou = document.getElementById("handou").value,wk=0;
var eq = MST_Equip[WP_Rui][document.getElementById("s_wp").value].split(",");
for (var i=0;i<= 31;i++) {
	if (eq[I_aGUN+i] !== "0") {
		//b填
		wk = document.getElementById("k"+i+"r").firstChild.nodeValue - eq[I_aRELO] - souten;
		document.getElementById("d"+i+"r").innerHTML = wk <= 4 ? "<span style='color:blue'>" + wk + ":快</span>" : wk >= 8 ? "<span style='color:red'>" + wk + ":慢</span>" : wk + ":普通";
		//反
		wk = rensya === "0" ? document.getElementById("k"+i+"h").firstChild.nodeValue - eq[I_aKICK] - handou : document.getElementById("k"+i+"h").firstChild.nodeValue;
		document.getElementById("d"+i+"h").innerHTML = wk <= 8 ? "<span style='color:blue'>" + wk + ":小</span>" : wk >= 11 ? "<span style='color:red'>" + wk + ":大</span>" : wk + ":中";
		document.getElementById("d"+i+"r").parentNode.style.display = "";
	} else {
		document.getElementById("d"+i+"r").firstChild.nodeValue= document.getElementById("d"+i+"h").firstChild.nodeValue = "";
		document.getElementById("d"+i+"r").parentNode.style.display = "none";
	}
}
for (var i=32;i<= 37;i++) {
		document.getElementById("d"+i+"r").firstChild.nodeValue= document.getElementById("d"+i+"h").innerHTML = "";
		document.getElementById("d"+i+"r").parentNode.style.display = "none";
}
if (eq[I_aCLASS] === "G" || eq[I_aCLASS] === "T" || eq[I_aCLASS] === "H"){
	if (!eq[I_aSOKUSYA]){ //N重
		i=35; //排
		//b填
		wk = document.getElementById("k"+i+"r").firstChild.nodeValue - eq[I_aRELO];
		document.getElementById("d"+i+"r").innerHTML = wk <= 4 ? "<span style='color:blue'>" + wk + ":快</span>" : wk >= 8 ? "<span style='color:red'>" + wk + ":慢</span>" : wk + ":普通";
		//反
		wk = document.getElementById("k"+i+"h").firstChild.nodeValue - eq[I_aKICK];
		document.getElementById("d"+i+"h").innerHTML = wk <= 8 ? "<span style='color:blue'>" + wk + ":小</span>" : wk >= 11 ? "<span style='color:red'>" + wk + ":大</span>" : wk + ":中";
		document.getElementById("d"+i+"r").parentNode.style.display = "";
	}
}
if (eq[I_aCLASS] === "S"){
	if (eq[I_aNAME].indexOf("辍窘k】") > 0){
		i = 33; //冰酸
	} else if (eq[I_aNAME].indexOf("弩【k】")+eq[I_aNAME].indexOf("弩【煌然】") > 0){
		i = 36; //酸
	} else {
		i = 32; //酸
	}
		//b填
		wk = document.getElementById("k"+i+"r").firstChild.nodeValue - eq[I_aRELO] - souten;
		document.getElementById("d"+i+"r").innerHTML = wk <= 4 ? "<span style='color:blue'>" + wk + ":快</span>" : wk >= 8 ? "<span style='color:red'>" + wk + ":慢</span>" : wk + ":普通";
		//反
		wk = rensya === "0" ? document.getElementById("k"+i+"h").firstChild.nodeValue - eq[I_aKICK] - handou : document.getElementById("k"+i+"h").firstChild.nodeValue;
		document.getElementById("d"+i+"h").innerHTML = wk <= 8 ? "<span style='color:blue'>" + wk + ":小</span>" : wk >= 11 ? "<span style='color:red'>" + wk + ":大</span>" : wk + ":中";
		document.getElementById("d"+i+"r").parentNode.style.display = "";
	if (eq[I_aNAME].indexOf("弩【煌然】") > 0){
		i = 32; //酸
		//b填
		wk = document.getElementById("k"+i+"r").firstChild.nodeValue - eq[I_aRELO] - souten;
		document.getElementById("d"+i+"r").innerHTML = wk <= 4 ? "<span style='color:blue'>" + wk + ":快</span>" : wk >= 8 ? "<span style='color:red'>" + wk + ":慢</span>" : wk + ":普通";
		//反
		wk = rensya === "0" ? document.getElementById("k"+i+"h").firstChild.nodeValue - eq[I_aKICK] - handou : document.getElementById("k"+i+"h").firstChild.nodeValue;
		document.getElementById("d"+i+"h").innerHTML = wk <= 8 ? "<span style='color:blue'>" + wk + ":小</span>" : wk >= 11 ? "<span style='color:red'>" + wk + ":大</span>" : wk + ":中";
		document.getElementById("d"+i+"r").parentNode.style.display = "";
	}
}
}

}//グロ`バル
return global;
})();

-->
</script>
<script type="text/javascript" src="equip.js"></script>
</body>
</html>
